{"ast":null,"code":"var _jsxFileName = \"F:\\\\The_Complete_2023_Web_Development_Bootcamp_2023\\\\des projets\\\\final\\\\marketplace\\\\client\\\\src\\\\lib\\\\hooks\\\\useFormValidation\\\\index.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FormContext = /*#__PURE__*/React.createContext();\nlet context;\nexport const useFormValidation = ({\n  formName,\n  defaultValues = {}\n}) => {\n  _s();\n  const [formValues, setFormValues] = React.useState({});\n  const [errors, setErrors] = React.useState({});\n  const [isDirty, setDirty] = React.useState(false);\n  const handleOnChange = (event, value) => {\n    var _value$toLowerCase;\n    setDirty(true);\n    const val = (_value$toLowerCase = value === null || value === void 0 ? void 0 : value.toLowerCase()) !== null && _value$toLowerCase !== void 0 ? _value$toLowerCase : event.target.value;\n    setFormValues(prevState => ({\n      ...prevState,\n      [formName]: {\n        ...prevState[formName],\n        [event.target.name]: val\n      }\n    }));\n  };\n  const isValid = React.useMemo(() => {\n    var _errors$formName;\n    return Object.values((_errors$formName = errors[formName]) !== null && _errors$formName !== void 0 ? _errors$formName : {}).some(error => error);\n  }, [formValues, handleOnChange]);\n  React.useEffect(() => register(), []);\n  const register = values => {\n    const val = values !== null && values !== void 0 ? values : defaultValues;\n    Object.entries(val).forEach(([key, value]) => {\n      setFormValues(prevState => ({\n        ...defaultValues,\n        [formName]: {\n          ...prevState[formName],\n          [key]: value\n        }\n      }));\n    });\n  };\n  const validate = async values => Object.entries(values).forEach(([key, value]) => setErrors(prevState => ({\n    ...prevState,\n    [formName]: {\n      ...prevState[formName],\n      [key]: !(value !== null && value !== void 0 && value.length)\n    }\n  })));\n  context = React.useMemo(() => {\n    return {\n      errors,\n      register,\n      validate,\n      handleOnChange,\n      formValues,\n      isValid: Boolean(!isValid && isDirty)\n    };\n  }, [formValues]);\n  return context;\n};\n_s(useFormValidation, \"8vD2abAyukZenqVrQKBB6qzCwwA=\");\nconst FormProvider = ({\n  children\n}) => /*#__PURE__*/_jsxDEV(FormContext.Provider, {\n  value: context,\n  children: children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 57,\n  columnNumber: 3\n}, this);\n_c = FormProvider;\nexport default FormProvider;\nvar _c;\n$RefreshReg$(_c, \"FormProvider\");","map":{"version":3,"names":["React","jsxDEV","_jsxDEV","FormContext","createContext","context","useFormValidation","formName","defaultValues","_s","formValues","setFormValues","useState","errors","setErrors","isDirty","setDirty","handleOnChange","event","value","_value$toLowerCase","val","toLowerCase","target","prevState","name","isValid","useMemo","_errors$formName","Object","values","some","error","useEffect","register","entries","forEach","key","validate","length","Boolean","FormProvider","children","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["F:/The_Complete_2023_Web_Development_Bootcamp_2023/des projets/final/marketplace/client/src/lib/hooks/useFormValidation/index.js"],"sourcesContent":["import React from \"react\";\n\nconst FormContext = React.createContext();\n\nlet context;\nexport const useFormValidation = ({ formName, defaultValues = {} }) => {\n  const [formValues, setFormValues] = React.useState({});\n  const [errors, setErrors] = React.useState({});\n  const [isDirty, setDirty] = React.useState(false);\n\n  const handleOnChange = (event, value) => {\n    setDirty(true);\n    const val = value?.toLowerCase() ?? event.target.value;\n    setFormValues((prevState) => ({\n      ...prevState,\n      [formName]: { ...prevState[formName], [event.target.name]: val },\n    }));\n  };\n\n  const isValid = React.useMemo(\n    () => Object.values(errors[formName] ?? {}).some((error) => error),\n    [formValues, handleOnChange]\n  );\n  React.useEffect(() => register(), []);\n\n  const register = (values) => {\n    const val = values ?? defaultValues;\n    Object.entries(val).forEach(([key, value]) => {\n      setFormValues((prevState) => ({\n        ...defaultValues,\n        [formName]: { ...prevState[formName], [key]: value },\n      }));\n    });\n  };\n  const validate = async (values) =>\n    Object.entries(values).forEach(([key, value]) =>\n      setErrors((prevState) => ({\n        ...prevState,\n        [formName]: { ...prevState[formName], [key]: !value?.length },\n      }))\n    );\n\n  context = React.useMemo(() => {\n    return {\n      errors,\n      register,\n      validate,\n      handleOnChange,\n      formValues,\n      isValid: Boolean(!isValid && isDirty),\n    };\n  }, [formValues]);\n  return context;\n};\n\nconst FormProvider = ({ children }) => (\n  <FormContext.Provider value={context}>{children}</FormContext.Provider>\n);\n\nexport default FormProvider;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}