{"ast":null,"code":"var _jsxFileName = \"F:\\\\The_Complete_2023_Web_Development_Bootcamp_2023\\\\des projets\\\\final\\\\marketplace\\\\client\\\\src\\\\components\\\\Checkout\\\\Success.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { saveOrder } from \"../../lib/state/actions\";\nimport useAuthentication from \"../../lib/hooks/useAuthentication\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst styles = {\n  height: \"100vh\",\n  fontSize: 20\n};\nfunction Success({\n  history\n}) {\n  _s();\n  const {\n    items\n  } = useSelector(state => state.cart);\n  const dispatch = useDispatch();\n  const {\n    handleAuthentication\n  } = useAuthentication(dispatch);\n  const dispatchAndSaveOrder = user => {\n    return new Promise(resolve => {\n      const total = localStorage.getItem('total');\n      const order = {\n        user,\n        items,\n        total: Number(total)\n      };\n      dispatch(saveOrder(order));\n      resolve();\n    });\n  };\n  const clearStorage = () => {\n    return new Promise(resolve => {\n      localStorage.setItem(\"items\", []);\n      resolve();\n    });\n  };\n  const redirectHome = () => {\n    return new Promise(resolve => {\n      setTimeout(() => history.push(\"/\"), 4000);\n      resolve();\n    });\n  };\n  useEffect(() => {\n    (async () => {\n      const userProfile = await handleAuthentication();\n      await dispatchAndSaveOrder(userProfile);\n      await clearStorage();\n      await redirectHome();\n    })(); // IIFE\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles,\n      className: \"d-flex justify-content-center align-items-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-success mt-3 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"icontext\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"icon text-success fa fa-thumbs-up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }, this), \"Thank you for your order & your payment\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(Success, \"VojbCNoK2fFA/n34WrOUXs3RrTQ=\", false, function () {\n  return [useSelector, useDispatch, useAuthentication];\n});\n_c = Success;\nexport default Success;\nvar _c;\n$RefreshReg$(_c, \"Success\");","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","saveOrder","useAuthentication","jsxDEV","_jsxDEV","Fragment","_Fragment","styles","height","fontSize","Success","history","_s","items","state","cart","dispatch","handleAuthentication","dispatchAndSaveOrder","user","Promise","resolve","total","localStorage","getItem","order","Number","clearStorage","setItem","redirectHome","setTimeout","push","userProfile","children","style","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["F:/The_Complete_2023_Web_Development_Bootcamp_2023/des projets/final/marketplace/client/src/components/Checkout/Success.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { saveOrder } from \"../../lib/state/actions\";\nimport useAuthentication from \"../../lib/hooks/useAuthentication\";\n\nconst styles = {\n  height: \"100vh\",\n  fontSize: 20,\n};\nfunction Success({ history }) {\n  const { items } = useSelector((state) => state.cart);\n  const dispatch = useDispatch();\n  const { handleAuthentication } = useAuthentication(dispatch);\n\n  const dispatchAndSaveOrder = (user) => {\n    return new Promise((resolve) => {\n      const total = localStorage.getItem('total')\n      const order = { user, items, total : Number(total) };\n      dispatch(saveOrder(order));\n      resolve();\n    });\n  };\n  const clearStorage = () => {\n    return new Promise((resolve) => {\n      localStorage.setItem(\"items\", []);\n      resolve();\n    });\n  };\n  const redirectHome = () => {\n    return new Promise((resolve) => {\n      setTimeout(() => history.push(\"/\"), 4000);\n      resolve();\n    });\n  };\n\n  useEffect(() => {\n    (async () => {\n      const userProfile = await handleAuthentication();\n      await dispatchAndSaveOrder(userProfile);\n      await clearStorage();\n      await redirectHome();\n    })(); // IIFE\n  }, []);\n\n  return (\n    <>\n      <div\n        style={styles}\n        className=\"d-flex justify-content-center align-items-center\">\n        <div className=\"alert alert-success mt-3 mb-3\">\n          <p className=\"icontext\">\n            <i className=\"icon text-success fa fa-thumbs-up\"></i>Thank you for\n            your order &amp; your payment\n          </p>\n        </div>\n      </div>\n    </>\n  );\n}\nexport default Success;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}